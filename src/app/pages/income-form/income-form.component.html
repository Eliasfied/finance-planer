<ion-content class="ion-padding">
  <form [formGroup]="incomeForm" (ngSubmit)="onSubmit()">
    <div formArrayName="incomes">
      <div *ngFor="let income of incomes.controls; let i=index" [formGroupName]="i">
        <ion-card>
          <ion-button *ngIf="incomes.length > 1" 
                     color="danger" 
                     (click)="removeIncome(i)"
                     class="remove-button">
            <ion-icon name="trash-outline" size="small" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-card-content>
            <ion-item>
              <ion-label position="stacked">Income Source</ion-label>
              <ion-input formControlName="source" placeholder="e.g., Salary"></ion-input>
            </ion-item>

            <ion-item>
              <ion-label position="stacked">Amount</ion-label>
              <ion-input type="number" formControlName="amount" placeholder="0.00"></ion-input>
            </ion-item>
          </ion-card-content>
        </ion-card>
      </div>
    </div>

    <ion-button expand="block" 
                color="primary" 
                (click)="addIncome()"
                class="add-button">
      <ion-icon name="add-outline" slot="start"></ion-icon>
      Add Another Income Source
    </ion-button>

    <ion-button expand="block" 
                type="submit" 
                [disabled]="!incomeForm.valid"
                class="submit-button">
      Save
    </ion-button>
  </form>
</ion-content> 